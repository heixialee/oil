<!--
Copyright (c) 2014 Long Xiang (seanlong@outlook.com). All rights reserved.
Unauthorized copying of this file, via any medium is strictly prohibited
Proprietary and confidential
-->

<link rel="import" href="./bower_components/core-item/core-item.html">

<link rel="import" href="./oil-image.html">


<polymer-element name="oil-tank">
    <template>
        <style>
        .oil-tank {
            margin: 20px 10px 40px 20px;
        }
        oil-image {
            margin-right: 40px;
        }
        .name {
            border-bottom: 4px solid #4caf50;
            font-size: 24px;
            font: bold;
        }
        core-item {
            border-bottom: 1px solid #bdbdbd;
        }
        data {
            margin-left: 4px;
            margin-top: 4px;
        }
        </style>
        <div class='oil-tank' horizontal layout>
            <oil-image on-click={{onChoose}} curr={{data.oil_level_high/height}}></oil-image>
            <div vertical layout>
                <div class='name'>#{{tank_id}}号罐</div>
                <div>
                    <core-item src="images/oil_low.png" label="油面低位: ">
                        <data>{{data.oil_level_low}} m</data>
                    </core-item>
                    <core-item src="images/oil_high.png" label="油面高位: ">
                        <data>{{data.oil_level_high}} m</data>
                    </core-item>
                    <core-item src="images/water.png" label="水面高度: ">
                        <data>{{data.water_level}} m</data>
                    </core-item>
                    <core-item src="images/temperature.png" label="平均温度: ">
                        <data>{{data.temperature}} °C</data>
                    </core-item>
                    <core-item src="images/volume.png" label="油品体积: ">
                        <data>{{data.oil_volume}}
                            <font>m<sup>3</sup>
                            </font>
                        </data>
                    </core-item>
                    <core-item src="images/density.png" label="油品密度: ">
                        <data>{{data.oil_density}} kg/
                            <font>m<sup>3</sup>
                            </font>
                        </data>
                    </core-item>
                    <core-item src="images/weight.png" label="油品质量: ">
                        <data>{{data.oil_weight}} kg</data>
                    </core-item>
                </div>
            </div>
        </div>
    </template>
    <script>
    var mock_data = [
        [2.3, 8.5, 1.6, 20.9, 423.5, 810],
        [1.8, 3.7, 1.2, 22.8, 178.6, 812],
        [0.7, 1.2, 0.2, 19.2, 69.5, 822],
        [3.5, 6.9, 3.2, 38.3, 330.5, 812],
        [2.3, 8.5, 1.6, 20.9, 423.5, 810],
        [2.3, 8.5, 1.6, 20.9, 423.5, 810],
    ];
    Polymer({
        created: function() {
            this.height = 10;
            //TODO(xiang): fetch current tank data from server.
        },
        ready: function() {},
        publish: {
            tank_id: -1,
            data: {},
        },
        attached: function() {
            var idx = this.tank_id;
            this.data = {
                oil_level_low: mock_data[idx][0],
                oil_level_high: mock_data[idx][1],
                water_level: mock_data[idx][2],
                temperature: mock_data[idx][3],
                oil_volume: mock_data[idx][4],
                oil_density: mock_data[idx][5],
                oil_weight: Math.floor(mock_data[idx][4] * mock_data[idx][5]),
            };
        },
        onChoose: function() {
            this.fire('choose-tank', {
                id: this.tank_id,
            });
        },
    });
    </script>
</polymer-element>
